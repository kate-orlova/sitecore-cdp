@using Foundation.SitecoreCDP.Configuration

<script>
    _boxeverq.push(() => {
        // Create an "IDENTITY" event object
        const identityEvent = {

            browser_id: Boxever.getID(),
            channel: "@ConfigSettings.Channel",
            type: "@ConfigSettings.TypeIdentity",
            language: "@Sitecore.Context.Item.Language.Name",
            currency: "@ConfigSettings.Currency",
            page: "@Sitecore.Links.LinkManager.GetItemUrl(Sitecore.Context.Item)",
            pos: "@ConfigSettings.POS",
            "identifiers": [{
                "provider": "Sitecore",
                "id": "@Sitecore.Context.User.GetProviderUserKey()",
                "firstname": "@Sitecore.Context.User.LocalName",
                "fullname": "@Sitecore.Context.User.Profile.FullName",
				"email": "@Sitecore.Context.User.Profile.Email"
            }]
        };

        // Send the event data to the server
        Boxever.eventCreate(
            identityEvent,
            () => { },
            "json"
        );
    });
</script>
